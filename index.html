<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NUWAHUB | المنصة الطبية الشاملة</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            /* Light Mode */
            --bg: #f3f6fc;
            --surface: rgba(255, 255, 255, 0.7);
            --text-main: #0f172a;
            --text-sec: #475569;
            --primary: #3b82f6;
            --primary-glow: rgba(59, 130, 246, 0.3);
            --accent: #06b6d4;
            --border: rgba(255, 255, 255, 0.6);
            --card-shadow: 0 10px 40px -10px rgba(0,0,0,0.08);
            --gradient-text: linear-gradient(135deg, #2563eb 0%, #06b6d4 100%);
        }

        [data-theme="dark"] {
            --bg: #030712;
            --surface: rgba(30, 41, 59, 0.6);
            --text-main: #f8fafc;
            --text-sec: #94a3b8;
            --primary: #60a5fa;
            --primary-glow: rgba(96, 165, 250, 0.2);
            --accent: #22d3ee;
            --border: rgba(255, 255, 255, 0.05);
            --card-shadow: 0 10px 40px -10px rgba(0,0,0,0.5);
            --gradient-text: linear-gradient(135deg, #60a5fa 0%, #22d3ee 100%);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; outline: none; }
        
        body {
            background-color: var(--bg);
            color: var(--text-main);
            overflow-x: hidden;
            transition: background 0.5s ease;
            line-height: 1.7;
            letter-spacing: 0.3px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            font-size: 16px;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            letter-spacing: 0.5px;
            line-height: 1.3;
        }

        h1 {
            font-size: 2.5rem;
        }

        h2 {
            font-size: 2rem;
        }

        h3 {
            font-size: 1.5rem;
        }

        h4 {
            font-size: 1.2rem;
        }

        p {
            font-size: 1rem;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        a {
            font-weight: 600;
            letter-spacing: 0.2px;
        }

        button {
            font-family: 'Cairo', sans-serif;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        /* --- Animated Background Canvas --- */
        #bg-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; opacity: 0.6; pointer-events: none;
        }

        /* --- Scrollbar --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--text-sec); border-radius: 4px; }

        /* --- Floating Navigation --- */
        .nav-wrapper {
            position: fixed; top: 20px; left: 0; right: 0;
            display: flex; justify-content: center; z-index: 1000;
            padding: 0 20px;
        }

        nav {
            background: var(--surface);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--border);
            padding: 12px 30px;
            border-radius: 50px;
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; max-width: 1000px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .logo {
            font-size: 1.4rem; font-weight: 900;
            background: var(--gradient-text); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            display: flex; align-items: center; gap: 10px;
        }
        
        .logo i { color: var(--primary); -webkit-text-fill-color: initial; }

        .nav-links { display: flex; gap: 30px; list-style: none; }
        .nav-links a {
            text-decoration: none; color: var(--text-main); font-weight: 600; font-size: 0.95rem;
            position: relative; padding: 5px 0; transition: 0.3s;
        }
        
        .nav-links a::after {
            content: ''; position: absolute; bottom: 0; right: 0; width: 0; height: 2px;
            background: var(--primary); transition: width 0.3s ease;
        }
        .nav-links a:hover::after { width: 100%; }

        .theme-btn {
            background: transparent; border: 1px solid var(--border);
            color: var(--text-main); width: 35px; height: 35px; border-radius: 50%;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: 0.3s;
        }
        .theme-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

        .menu-btn { display: none; font-size: 1.2rem; cursor: pointer; color: var(--text-main); }

        /* --- Hero Section --- */
        .hero {
            min-height: 100vh; display: flex; align-items: center; justify-content: center;
            padding: 120px 20px 60px; position: relative;
        }
        
        .hero-container {
            max-width: 1200px; width: 100%;
            display: grid; grid-template-columns: 1.2fr 1fr; gap: 40px; align-items: center;
        }

        .hero-text h1 {
            font-size: clamp(2.5rem, 5vw, 4.5rem); line-height: 1.2; margin-bottom: 25px;
        }
        
        .gradient-word {
            background: var(--gradient-text); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .hero-text p {
            font-size: 1.2rem; color: var(--text-sec); margin-bottom: 40px; max-width: 500px; line-height: 1.8;
        }

        .cta-btn {
            background: var(--gradient-text); color: white; border: none;
            padding: 16px 45px; font-size: 1.1rem; font-weight: 700; border-radius: 50px;
            cursor: pointer; box-shadow: 0 10px 25px var(--primary-glow);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative; overflow: hidden;
        }
        
        .cta-btn::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transform: translateX(-100%); transition: 0.5s;
        }
        
        .cta-btn:hover { transform: translateY(-3px); box-shadow: 0 15px 35px var(--primary-glow); }
        .cta-btn:hover::before { transform: translateX(100%); }

        /* 3D Floating Illustration Placeholder */
        .hero-visual {
            position: relative; display: flex; justify-content: center;
        }
        
        .float-card {
            background: var(--surface); backdrop-filter: blur(20px);
            padding: 30px; border-radius: 30px; border: 1px solid var(--border);
            box-shadow: var(--card-shadow);
            animation: float 6s ease-in-out infinite;
            text-align: center; max-width: 400px;
        }
        
        .float-icon {
            font-size: 4rem; background: var(--gradient-text); -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* --- Cards Section --- */
        .section-title {
            text-align: center; font-size: 2.5rem; margin-bottom: 60px;
        }

        .grid-container {
            max-width: 1200px; margin: 0 auto 100px; padding: 0 20px;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px;
        }

        .glass-card {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 40px 30px; border-radius: 24px;
            position: relative; cursor: pointer;
            transform-style: preserve-3d;
            transform: perspective(1000px);
            transition: border-color 0.3s;
        }

        .glass-card-inner {
            transform: translateZ(20px); /* Parallax effect text */
        }

        .glass-card:hover { border-color: var(--primary); }

        .card-icon-box {
            width: 70px; height: 70px; border-radius: 20px;
            background: rgba(59, 130, 246, 0.1);
            display: flex; align-items: center; justify-content: center;
            font-size: 2rem; color: var(--primary); margin-bottom: 25px;
            transition: 0.4s;
        }
        
        .glass-card:hover .card-icon-box { background: var(--primary); color: white; transform: scale(1.1) rotate(5deg); }

        .glass-card h3 { font-size: 1.5rem; margin-bottom: 15px; }
        .glass-card p { color: var(--text-sec); line-height: 1.6; }

        /* --- Footer --- */
        footer {
            border-top: 1px solid var(--border); background: var(--surface);
            backdrop-filter: blur(10px); padding: 50px 20px; text-align: center;
        }
        
        .socials {
            display: flex; justify-content: center; gap: 20px; margin-top: 20px;
        }
        
        .social-link {
            width: 45px; height: 45px; border-radius: 50%;
            background: var(--bg); border: 1px solid var(--border);
            display: flex; align-items: center; justify-content: center;
            color: var(--text-main); font-size: 1.2rem; transition: 0.3s; text-decoration: none;
        }
        
        .social-link:hover { background: var(--primary); color: white; transform: translateY(-3px); }

        /* --- Mobile Overlay --- */
        .mobile-menu {
            position: fixed; inset: 0; background: var(--bg); z-index: 999;
            display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 40px;
            transform: translateY(-100%); transition: 0.5s cubic-bezier(0.77, 0, 0.175, 1);
        }
        .mobile-menu.active { transform: translateY(0); }
        .mobile-menu a { font-size: 2rem; font-weight: 800; color: var(--text-main); text-decoration: none; }

        @media (max-width: 900px) {
            .hero-container { grid-template-columns: 1fr; text-align: center; }
            .hero-text p { margin: 0 auto 40px; }
            .hero-visual { display: none; } /* Hide visual on mobile for cleaner look */
            .nav-links { display: none; }
            .menu-btn { display: block; }
        }
		.logo {
    font-size: 1.9rem;
    font-weight: 900;
    background: var(--gradient-text);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none; 
}

.logo img {
    height: 40px; 
    width: auto;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1)); 
}
    </style>
</head>
<body data-theme="light">

    <canvas id="bg-canvas"></canvas>

    <div class="nav-wrapper">
        <nav>
            <a href="#home" class="logo">
    <img src="resources/nuwahub-logo.png" alt="NUWAHUB Logo" style="height: 40px; width: auto;">
    NUWAHUB
</a>
            
            <ul class="nav-links">
                <li><a href="#home">الرئيسية</a></li>
                <li><a href="#years">السنوات</a></li>
                <li><a href="#community">المجتمع</a></li>
                <li><a href="#contact">تواصل معنا</a></li>
            </ul>

            <div style="display: flex; gap: 15px; align-items: center;">
                <button class="theme-btn" id="themeBtn" title="تبديل الوضع">
                    <i class="fas fa-moon"></i>
                </button>
                <a href="login.html" id="loginLink" class="nav-links" style="gap: 0; padding: 8px 15px; background: var(--primary); color: white; border-radius: 25px; margin: 0;">
                    <i class="fas fa-sign-in-alt"></i> دخول
                </a>
                <a href="profile.html" id="profileLink" class="nav-links" style="gap: 0; padding: 8px 15px; background: var(--primary); color: white; border-radius: 25px; margin: 0; display: none;">
                    <i class="fas fa-user"></i> ملفي
                </a>
                <button onclick="logoutUser()" id="logoutBtn" class="theme-btn" style="background: var(--error); color: white; border-color: var(--error); display: none;" title="تسجيل الخروج">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
                <div class="menu-btn" id="menuBtn"><i class="fas fa-bars"></i></div>
            </div>
        </nav>
    </div>

    <div class="mobile-menu" id="mobileMenu">
        <a href="#home" onclick="toggleMenu()">الرئيسية</a>
        <a href="#years" onclick="toggleMenu()">السنوات الدراسية</a>
        <a href="#community" onclick="toggleMenu()">المجتمع الطبي</a>
        <a href="#" onclick="toggleMenu()" style="font-size: 1.5rem; color: var(--text-sec);"><i class="fas fa-times"></i> إغلاق</a>
    </div>

    <section class="hero" id="home">
        <div class="hero-container">
            <div class="hero-text">
                <h1 class="gsap-reveal">منصة الطب <br><span class="gradient-word">بمفهوم المستقبل</span></h1>
                <p class="gsap-reveal">الرفيق الرقمي الأول لطلاب الطب في الجزائر. نجمع بين المراجع الأكاديمية والتقنيات التفاعلية لتبسيط رحلتك الدراسية.</p>
                <div class="gsap-reveal">
                    <button class="cta-btn" onclick="document.getElementById('years').scrollIntoView({behavior:'smooth'})">
                        ابدأ التصفح <i class="fas fa-arrow-left" style="margin-right: 10px;"></i>
                    </button>
                </div>
            </div>

            <div class="hero-visual gsap-reveal">
                <div class="float-card">
                    <i class="fas fa-heart-pulse float-icon"></i>
                    <h2 style="margin-bottom: 10px;">كل المصادر بين يديك</h2>
                    <p style="color: var(--text-sec); font-size: 0.9rem;">ملفات منظمة، شروحات فيديو، وبنك أسئلة متكامل.</p>
                    <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center;">
                        <span style="width: 10px; height: 10px; background: var(--primary); border-radius: 50%;"></span>
                        <span style="width: 10px; height: 10px; background: var(--accent); border-radius: 50%;"></span>
                        <span style="width: 10px; height: 10px; background: #e2e8f0; border-radius: 50%;"></span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="years">
        <h2 class="section-title gsap-up"><span class="gradient-word">المسار الأكاديمي</span></h2>
        
        <div class="grid-container">
            <div class="glass-card tilt-card gsap-up" onclick="window.location.href='first-year.html'">
                <div class="glass-card-inner">
                    <div class="card-icon-box"><i class="fas fa-microscope"></i></div>
                    <h3>السنة الأولى</h3>
                    <p>المحطة التأسيسية. اكتشف علم التشريح، البيولوجيا الخلوية، والكيمياء الحيوية بمصادر مبسطة.</p>
                </div>
            </div>

            <div class="glass-card tilt-card gsap-up" onclick="window.location.href='second-year.html'">
                <div class="glass-card-inner">
                    <div class="card-icon-box"><i class="fas fa-brain"></i></div>
                    <h3>السنة الثانية</h3>
                    <p>تعمق في وظائف الأعضاء (Physiology) وعلم الأنسجة. جسر العبور نحو الفهم السريري.</p>
                </div>
            </div>

            <div class="glass-card tilt-card gsap-up" onclick="window.location.href='third-year.html'">
                <div class="glass-card-inner">
                    <div class="card-icon-box"><i class="fas fa-user-md"></i></div>
                    <h3>السنة الثالثة</h3>
                    <p>بداية الطب الحقيقي. علم الأمراض، السميولوجيا، والتعامل الأول مع الحالات السريرية.</p>
                </div>
            </div>
        </div>
    </section>

    <footer id="contact">
        <h3 style="margin-bottom: 20px;">NUWAHUB</h3>
        <p style="color: var(--text-sec); margin-bottom: 30px;">نصنع مستقبل التعليم الطبي في الجزائر</p>
        <div class="socials">
            <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
            <a href="#" class="social-link"><i class="fab fa-telegram"></i></a>
            <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
        </div>
        <p style="margin-top: 40px; font-size: 0.8rem; opacity: 0.6;">&copy; 2025 جميع الحقوق محفوظة</p>
    </footer>

    <script>
        // --- 1. Canvas Molecular Background ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let particlesArray;

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedX = (Math.random() * 1.5) - 0.75;
                this.speedY = (Math.random() * 1.5) - 0.75;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x > canvas.width || this.x < 0) this.speedX = -this.speedX;
                if (this.y > canvas.height || this.y < 0) this.speedY = -this.speedY;
            }
            draw(color) {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            particlesArray = [];
            let numberOfParticles = (canvas.width * canvas.height) / 15000;
            for (let i = 0; i < numberOfParticles; i++) {
                particlesArray.push(new Particle());
            }
        }

        function animateParticles() {
            let isDark = document.body.getAttribute('data-theme') === 'dark';
            let pColor = isDark ? 'rgba(96, 165, 250, 0.5)' : 'rgba(37, 99, 235, 0.3)';
            let lineColor = isDark ? 'rgba(96, 165, 250, 0.1)' : 'rgba(37, 99, 235, 0.1)';

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
                particlesArray[i].draw(pColor);
                
                for (let j = i; j < particlesArray.length; j++) {
                    const dx = particlesArray[i].x - particlesArray[j].x;
                    const dy = particlesArray[i].y - particlesArray[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < 120) {
                        ctx.beginPath();
                        ctx.strokeStyle = lineColor;
                        ctx.lineWidth = 1;
                        ctx.moveTo(particlesArray[i].x, particlesArray[i].y);
                        ctx.lineTo(particlesArray[j].x, particlesArray[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animateParticles);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initParticles();
        });

        initParticles();
        animateParticles();

        // --- 2. Dark Mode Logic ---
        const themeBtn = document.getElementById('themeBtn');
        const icon = themeBtn.querySelector('i');
        
        if (localStorage.getItem('theme') === 'dark') {
            document.body.setAttribute('data-theme', 'dark');
            icon.classList.replace('fa-moon', 'fa-sun');
        }

        themeBtn.addEventListener('click', () => {
            const isDark = document.body.getAttribute('data-theme') === 'dark';
            document.body.setAttribute('data-theme', isDark ? 'light' : 'dark');
            icon.classList.replace(isDark ? 'fa-sun' : 'fa-moon', isDark ? 'fa-moon' : 'fa-sun');
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
        });

        // --- 3. 3D Tilt Effect for Cards (Vanilla JS) ---
        const cards = document.querySelectorAll('.tilt-card');

        cards.forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = ((y - centerY) / 10) * -1; // Invert tilt
                const rotateY = (x - centerX) / 10;

                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale3d(1.02, 1.02, 1.02)`;
            });

            card.addEventListener('mouseleave', () => {
                card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale3d(1, 1, 1)`;
            });
        });

        // --- 4. Mobile Menu ---
        const menuBtn = document.getElementById('menuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        
        function toggleMenu() {
            mobileMenu.classList.toggle('active');
        }
        menuBtn.addEventListener('click', toggleMenu);

        // --- Authentication UI Management ---
        function updateAuthUI() {
            const user = getCurrentUser();
            const loginLink = document.getElementById('loginLink');
            const profileLink = document.getElementById('profileLink');
            const logoutBtn = document.getElementById('logoutBtn');

            if (user) {
                loginLink.style.display = 'none';
                profileLink.style.display = 'flex';
                logoutBtn.style.display = 'flex';
            } else {
                loginLink.style.display = 'flex';
                profileLink.style.display = 'none';
                logoutBtn.style.display = 'none';
            }
        }

        // Update auth UI on page load and when storage changes
        window.addEventListener('DOMContentLoaded', updateAuthUI);
        window.addEventListener('storage', updateAuthUI);
        updateAuthUI();

        // --- 5. GSAP Animations ---
        gsap.registerPlugin(ScrollTrigger);

        // Hero Stagger
        gsap.from(".gsap-reveal", {
            y: 50, opacity: 0, duration: 1, stagger: 0.2, ease: "power3.out"
        });

        // Scroll Reveal for Cards
        gsap.utils.toArray('.gsap-up').forEach(element => {
            gsap.from(element, {
                scrollTrigger: {
                    trigger: element,
                    start: "top 85%",
                    toggleActions: "play none none reverse"
                },
                y: 50, opacity: 0, duration: 0.8, ease: "power3.out"
            });
        });

    </script>
    <script src="js/auth.js"></script>
    <script src="js/theme.js"></script>
</body>
</html>